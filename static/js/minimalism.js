!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){o(1);const n=o(2);window.addEventListener("load",()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js"),new n})},function(e,t,o){},function(e,t){const o=["animationend","webkitAnimationEnd","MSAnimationEnd","oanimationend"];e.exports=class{constructor(){this.patchLinks(document),this.patchPopState()}patchLinks(e){e.querySelectorAll("a[href]").forEach(e=>{e.addEventListener("click",t=>{t.which>1||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||e.protocol===window.location.protocol&&e.host===window.location.host&&(t.preventDefault(),this.doRequest(e.href))})})}patchPopState(){window.addEventListener("popstate",e=>{window.history.replaceState({url:location.href,scroll:[window.scrollX,window.scrollY]},"",location.href),this.doRequest(e.state.url,!1).then(()=>{"scroll"in e.state&&window.scrollTo(e.state.scroll[0],e.state.scroll[1])})})}doRequest(e,t=!0){return Promise.all([fetch(e),this.startLoading()]).then(e=>{const t=e[0];if(200===t.status)return t.text();throw new Error("response status "+t.status)}).then(o=>{const n=(new DOMParser).parseFromString(o,"text/html");this.patchLinks(n),t&&(window.history.pushState({url:e},"",e),window.scrollTo(0,0)),this.replaceElement("title",document,n),this.replaceElement("header",document,n),this.replaceElement("main",document,n),this.replaceElement("footer",document,n)}).then(()=>this.stopLoading())}replaceElement(e,t,o){const n=t.querySelector(e),r=o.querySelector(e),i=n.parentNode;i.insertBefore(r,n),i.removeChild(n)}startLoading(){return Promise.all([this.hideElement("header"),this.hideElement("main"),this.hideElement("footer")]).then(()=>new Promise((e,t)=>{const o=document.querySelector("div#mask");o.removeAttribute("data-pjax-complete"),setTimeout(()=>{o.hasAttribute("data-pjax-complete")||(o.style.display="block")},100),e()}))}stopLoading(){return new Promise((e,t)=>{const o=document.querySelector("div#mask");o.setAttribute("data-pjax-complete",""),o.style.display="none",e()}).then(()=>Promise.all([this.showElement("header"),this.showElement("main"),this.showElement("footer")]))}hideElement(e){const t=document.querySelector(e);return new Promise((e,n)=>{t.classList.add("pjax-remove"),o.forEach(o=>{t.addEventListener(o,e,!0)})}).then(()=>{t.style.opacity=0})}showElement(e){const t=document.querySelector(e);return new Promise((e,n)=>{t.classList.add("pjax-add"),o.forEach(o=>{t.addEventListener(o,e,!0)})}).then(()=>{t.classList.remove("pjax-add")})}}}]);